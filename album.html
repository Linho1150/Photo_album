<html>
<head>
  <title>PhotoAlbum</title>
  <link rel="stylesheet" type="text/css" href="./main.css">
  <link rel="stylesheet" href="./lightbox_dist/css/lightbox.min.css"/>

</head>
<body>
<header>
  <nav>
    <h1 class="logo" style="text-align: center;">PhotoAlbum</h1>
  </nav>
</header>
<main>
  <div class="items" id="items"></div>
</main>
<footer>

</footer>
</body>
<script src="./lightbox_dist/js/lightbox-plus-jquery.min.js"></script>
<script>
    lightbox.option({
      'disableScrolling': true;
    })
</script>
<script>
var bCheckEnabled = true;
var bFinishCheck = false;

var img;
var DataArray = new Array();
var count = 1;
read_text();
//var myInterval = setInterval(loadImage, 1);

function loadImage(str_filelist) {


  var arr_filelist=str_filelist.split("\n");
  count=arr_filelist[0];

  //var arrstring = arrfile.split("\n");
  for(var tmp=count;tmp>0;tmp--){
    var name_date=arr_filelist[tmp].split("/");
    DataArray.push(name_date);
  }
  display_object(DataArray)
}

function display_object(DataArray){
  var count, text = "";
  var name,date;

  for (count in DataArray) {
  name=DataArray[count][0];
  date=DataArray[count][1];
  date=date.substring(0,4)+"-"+date.substring(4,6)+"-"+date.substring(6,8);
  text += "<div class=\"item\"><a class=\"example-image-link\" href=\"./img/"+name+"\" data-lightbox=\""+date+"\" data-title=\""+date+"\"><img class=\"example-image\" src=\"./img/"+name+"\"></img></a></div>";
  };
  document.getElementById("items").innerHTML = text;
}

function read_text(){
  var file = "https://raw.githubusercontent.com/Linho1150/Photo_album/main/file_list/list.txt";
  var rawFile = new XMLHttpRequest();
  rawFile.open("GET", file);
  rawFile.onreadystatechange = function ()
  {
      if(rawFile.readyState === 4)
      {
          if(rawFile.status === 200 || rawFile.status == 0)
          {
              var allText = rawFile.responseText;
              loadImage(allText);
          }
      }
  }
  rawFile.send(null);

}
</script>
</html>
